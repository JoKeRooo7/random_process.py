## Approach to equilibrium

* [Скрипт `approach_to_equilibrium.py`](#скрипт-approachtoequilibrium2dpy)
    * [Графики](#результаты-эксперимента-графики)
    * [Вывод](#вывод-approachtoequilibriumpy)
* [Скрипт `update_approach_to_equilibrium.py`]
    * [Графики](#графики)
    * [Вывод](#вывод-updateapproachtoequilibriumpy)
 
## Скрипт approach_to_equilibrium.py

В скрипте `approach_to_equilibrium.py` была промоделирована ситуация, для анализа равновесия системы, при котором частицы движутся хаотично, по координатам $x, y$. Логика изменения их координат находится в методе `step()` класса `Box`.

###  Неустойчивое равновесие системы

Для вычисления количества шагов, в котором система сразу переходит в неустойчивое равновесие, я написал скрипт, который проводит эксперименты, в задаваемом количестве раз и записывает количество шагов в таблицу.

Скрипт `unstanle_equlibrium_results.py`

После из таблицы подсчитываются данные:

*  среднее значение шагов

$$ \bar{x} = \frac{1}{n}\sum_{i=1}^{n}x_i $$

*  стандартное отклонение

$$ \sigma = \sqrt {\frac{{\sum_{i=1}^{n}(x_i-\bar{x})}}{{n}}} $$

*  стандартную ошибку (абсолютная погрешность среднего значения)

$$ d = \frac{\sigma}{\sqrt{n}} $$

*  погрешность с доверительным интервалом
$$ \dot{x} = \bar{x} \pm k * d $$ 
$k$ - коэффициент, соответствующий уровню доверия (например, для уровня доверия 95% $k = 1.96$

* Результаты достижения неустойчивого равновесия, при провердении 1000 экспериментов:
    * 8 частиц: $6.358 \pm 0.096 * 0.1899$. Погрешность - $0.23$ % 
    * 16 частиц: $16.432 \pm 0.250 * 0.490$ Погрешность - $0.74$ % 
    * 64 частиц: $88.452 \pm 1.120 * 2.195$ Погрешность - $2.78$ % 
    * 400 частиц: $728.320 \pm 6.968 * 13.658$ Погрешность - $13.07$ %
    * 800 частиц: $1581.870 \pm 14.148 * 27.731$ Погрешность - $24.8$ % 
    * 3600 частиц: $8640.204 \pm 67.389 * 132.082$ Погрешность > $100$ % 

Так как погрешность огромна из на нехватки и большого разброса случаев с большим количеством частиц значений, проведем еще 100000 эксперементов.

* Резуьтаты при датасете с 100000 количеством данных для каждой частицы:
    * 8 частиц: $6.7126 \pm 0.011 * 0.022$. Погрешность < $0.01$ % 
    * 16 частиц: $16.148 \pm 0.0246 * 0.048$ Погрешность < $0.01$ % 
    * 64 частиц: $86.699 \pm 0.108 * 0.211$ Погрешность - $0.03$ % 
    * 400 частиц: $726.060 \pm 0.696 * 1.365$ Погрешность - $0.13$ %
    * 800 частиц: $1591.284 \pm 1.405 * 2.754$ Погрешность - $0.24$ % 
    * 3600 частиц: $8512.508\pm 6.278 * 12.304$ Погрешность - $0.91$ %

При увеличении количества экспериментов в 100 раз, погрешность уменьшилась в 100 раз.

## Результаты эксперимента (графики):

* 100 итераций для системы с 8, 16, 64 частицами.
![first_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_100_8_16_64___1.png)
![second_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_100_8_16_64___2.png)
![third_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_100_8_16_64___2.png)


* 1000 итераций для системы с 8, 16, 64 частицами.
![fourth_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_1000_8_16_64___1.png)
![five_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_1000_8_16_64___2.png)
![six_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_1000_8_16_64___2.png)

* 100 итераций для системы с 400, 800, 3600 частицами.
![seven_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_100__400_800_3600___1.png)
![eight_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_100__400_800_3600___2.png)
![nine_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_100__400_800_3600___3.png)

* 1000 итераций для системы с 400, 800, 3600 частицами.
![ten_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_1000__400_800_3600___1.png)
![eleven_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_1000__400_800_3600___2.png)
![twelve_graphic](../../image/approach_to_equilibrium/approach_to_equilibrium_1000__400_800_3600___3.png)

## Вывод approach_to_equilibrium.py
В результате эксперимента были сделаны следующие выводы:

* Система промежуточно достигает равновесия на короткий промежуток итераций даже если рассматривать два разных критерия:

    * критерий равновесия (изменения количество частиц на одной стороне)

    * критерий равновесия (количество частиц справа и слева одинаковое)

* При большом количестве частиц, система изменяется на незначительное,малозаметное количество частиц, что может быть близко к критерию равновесия. Но все равно достигается на определенный промежуток итераций.

___

## Скрипт update_approach_to_equilibrium.py
В скрипте смоделирована такая же сиутация как и в [`approach_to_equilibrium.py`](#скрипт-approachtoequilibrium2dpy), только условие такоого, что частица перемещеается вправо, только при условии
$$ r \leq  p = n / N$$
где $r$ - случайное число от 0 до 1, 
$n$ - количество частиц влевой части
$N$ - количество всего частиц


## Графики

* 100 итераций для системы с 8, 16, 64 частицами.
![up_gr_1](../../image/approach_to_equilibrium/up_to_equilibrium_100_8_16_64___1.png)
* 1000 итераций для системы с 8, 16, 64 частицами.
![up_gr_2](../../image/approach_to_equilibrium/up_to_equilibrium_1000_8_16_64___1.png)
* 100 итераций для системы с 400, 800, 3600 частицами.
![up_gr_3](../../image/approach_to_equilibrium/up_to_equilibrium_100__400_800_3600___1.png)
* 1000 итераций для системы с 400, 800, 3600 частицами.
![up_gr_34](../../image/approach_to_equilibrium/up_to_equilibrium_1000__400_800_3600___1.png)

Из за условия, при котором рандом должен быть меньше вероятности частиц на левой сторое, количество частиц слевой стороны при каждой итерации уменьшается. Система стремиться к равновесию.


## Вывод update_approach_to_equilibrium.py

При малом количестве частиц - система находитсья близко к равновесию, но не достигает его. При значительном количестве частиц, система находиться в равновесии.

Время при котором система проходит в состояние равновесия, уже происходит на первых итерациях (< 10).